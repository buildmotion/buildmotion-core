!function(e,o){"object"==typeof exports&&"undefined"!=typeof module?o(exports,require("@angular/core"),require("@angular/common"),require("buildmotion-foundation"),require("buildmotion-logging"),require("angular-rules-engine")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common","buildmotion-foundation","buildmotion-logging","angular-rules-engine"],o):o(e.buildmotionCore={},e.ng.core,e.ng.common,e.buildmotionFoundation,e.buildmotionLogging,e.angularRulesEngine)}(this,function(e,o,t,r,n,i){"use strict";var s=function(){function e(){}return e.Information="alert-info",e.Warning="alert-warning",e.Danger="alert-danger",e.Success="alert-success",e}(),a=function(){return function(e,o,t,r){this.type=s.Information,this.messages=new Array,this.showAlert=!1,r&&(this.type=r),this.header=e,this.title=o,t&&(this.messages=t),this.header&&this.title&&(this.showAlert=!0)}}(),g=function(){function e(){this.alertNotification=new a("",""),this.hasMessage=!1}return e.prototype.ngOnInit=function(){},e.decorators=[{type:o.Component,args:[{selector:"buildmotion-alert",template:'<div *ngIf="hasMessage">\n  <div class="alert {{alertNotification.type}} fade in">\n    \x3c!--<a href="#" class="close" data-dismiss="alert">&times;</a>--\x3e\n    <strong>{{alertNotification.header}}</strong> :: {{alertNotification.title}}\n    <ul>\n      <li *ngFor="let message of alertNotification.messages">{{message}}</li>\n    </ul>\n  </div>\n</div>'}]}],e.ctorParameters=function(){return[]},e.propDecorators={alertNotification:[{type:o.Input}],hasMessage:[{type:o.Input}]},e}(),c=function(){function e(){}return e.decorators=[{type:o.NgModule,args:[{imports:[t.CommonModule,r.BuildMotionFoundationModule,n.BuildMotionLoggingModule],declarations:[g],exports:[g],schemas:[o.NO_ERRORS_SCHEMA]}]}],e.ctorParameters=function(){return[]},e}(),l=function(){function e(e,o,t){this.loggingService=o,this.router=t,this.componentName=e,this.alertNotification=new a("","")}return e.prototype.createErrorResponse=function(e){this.loggingService.log(this.componentName,n.Severity.Information,"Preparing to create error response for component.");var o=new r.ErrorResponse;return o.Message=e,o},e.prototype.handleServiceErrors=function(e,o){if(this.loggingService.log(this.componentName,n.Severity.Information,"Preparing to handle service errors for component."),o&&o.hasErrors()){this.loggingService.log(this.componentName,n.Severity.Information,"Retrieving error messages from the ServiceContext/ValidationContext;");var t=this.retrieveServiceContextErrorMessages(o);this.alertNotification=new a("Errors",e.Message,t,s.Warning)}else if(e&&e.Message){this.loggingService.log(this.componentName,n.Severity.Information,"Retrieving error messages from the [ErrorResponse].");var r=this.retrieveResponseErrorMessages(e);this.alertNotification=new a("Error",e.Message,r,s.Warning),this.loggingService.log(this.componentName,n.Severity.Error,"Error: "+e.Message)}},e.prototype.retrieveServiceContextErrorMessages=function(e){var o=Array();return e.Messages.forEach(function(e){e.MessageType===i.MessageType.Error&&e.DisplayToUser&&o.push(e.Message)}),o},e.prototype.retrieveResponseErrorMessages=function(e){var o=new Array;return e&&e.Errors&&e.Errors.forEach(function(e){e.DisplayToUser&&o.push(e.Message)}),o},e.prototype.resetAlertNotifications=function(){this.alertNotification=new a("","")},e.prototype.routeTo=function(e){try{this.router.navigate([e])}catch(o){this.loggingService.log(this.componentName,n.Severity.Error,"Error while attempting to navigate to ["+e+"] route from "+this.componentName+". Error: "+o.toString())}},e.prototype.showResponseErrors=function(e){this.handleServiceErrors(e,void 0)},e.prototype.finishRequest=function(e){this.loggingService.log(this.componentName,n.Severity.Information,this.componentName+": "+e)},e.prototype.showAlertMessage=function(e){alert(e)},e}();e.BuildMotionCoreModule=c,e.AlertComponent=g,e.ComponentBase=l,Object.defineProperty(e,"__esModule",{value:!0})});